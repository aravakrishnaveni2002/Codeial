{let t=function(){let t=$("#post-form");t.submit(function(s){s.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:t.serialize(),success:function(t){let s=n(t.data.post);$("#users-posts").prepend(s),e($(" #delete-post",s)),new postComments(t.data.post._id),new ToggleLike($(" .toggle-like-btn",s)),o("Post Published","success")},error:function(t){o(t,"error")}})})},n=function(t){return $(`<div id="each-post-${t._id}" class="each-post">\n            \n                    <div id="info">\n                \n                        <i class="fas fa-user"></i>\n                        \n                        <div id="post-info">\n                            <span id="posted-by"> ${t.user.name}</span>\n                            <span id="posted-at">Posted on ${t.createdAt.toString().substring(0,15)}</span>\n                        </div>\n                \n                        <a href="/posts/delete/${t._id}" id="delete-post">delete-post</a>    \n                \n                    </div>\n                \n                    <div id="content">\n                        <p>${t.content}</p>\n                    </div>\n\n                    <div id="likes">\n                        <a class="toggle-like-btn" data-likes="0" href="/likes/toggle/?id=${t._id}&type=Post">\n                            <i class="fas fa-thumbs-up"></i>\n                            <span>0 Likes</span>\n                        </a>\n                        \n                    </div>\n                \n                    <span id="comm-heading">comments</span>\n                \n                    <section id="comments">\n                    \n                        \n                        <form action="/comments/create" method="POST" class="comment-form" id="post-${t._id}-comment-form">\n                            <textarea name="content" id="comment-content" cols="30" rows="2" placeholder="Type Here..."></textarea>\n                            <input type="hidden" name="post_id" value="${t._id}">\n                            <button id="comment-btn">\n                                comment\n                            </button>\n                        </form>\n                       \n                    \n                        <div id="post-comments-${t._id}" class="post-comments">\n                    \n                                \n                    \n                        </div>\n                    </section>\n    \n                </div>`)},e=function(t){$(t).click(function(n){n.preventDefault(),$.ajax({type:"GET",url:$(t).prop("href"),success:function(t){$(`#each-post-${t.data.post_id}`).remove(),o("Post and its related comments deleted","success")},error:function(t){o(t,"error")}})})},s=function(){$("#users-posts>.each-post").each(function(){let t=$(this),n=$(" #delete-post",t);e(n);let s=t.prop("id").split("-")[2];new postComments(s)})},o=function(t,n){new Noty({theme:"relax",text:t,type:n,layout:"topRight",timeout:1500}).show()};t(),s()}